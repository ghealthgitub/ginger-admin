<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctors | Ginger Admin</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600;9..40,700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/admin.css">
    <link rel="stylesheet" href="/css/listing.css">
</head>
<body>
<div class="layout">
    <aside class="sidebar" id="sidebar"></aside>
    <main class="main">
        <header class="topbar">
            <button class="topbar__menu" onclick="document.getElementById('sidebar').classList.toggle('open')">☰</button>
            <h1 class="topbar__title" id="pageTitle">Doctors</h1>
            <div class="topbar__actions"></div>
        </header>
        <div class="content">
            <div class="status-tabs" id="statusTabs"></div>
            <div class="selected-bar" id="selectedBar">
                <span id="selectedCount">0 selected</span>
                <button class="btn-clear" onclick="Listing.clearSel()">✕ Clear selection</button>
            </div>
            <div class="toolbar" id="filterToolbar"></div>
            <div class="card">
                <div class="card__body" style="padding:0;overflow-x:auto">
                    <table class="data-table" id="listTable">
                        <thead><tr></tr></thead>
                        <tbody id="list">
                            <tr><td colspan="10" class="empty-state loading-state">
                                <div class="loading-spinner"></div> Loading...
                            </td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>
</div>
<div class="listing-toast" id="listingToast"></div>

<script src="/js/sidebar.js" defer></script>
<script src="/js/listing.js"></script>
<script>
window.LISTING = {
    cpt: 'doctor',
    apiEndpoint: '/api/doctors',
    newUrl: '/doctors/new',
    editUrl: (item) => '/doctors/edit/' + item.id,
    viewUrl: (item) => item.destination_slug && item.slug && item.status === 'published'
        ? 'https://ginger.healthcare/destinations/' + item.destination_slug + '/doctors/' + item.slug + '/'
        : null,
    slugDisplay: (item) => '/destinations/' + (item.destination_slug || '...') + '/doctors/' + (item.slug || '') + '/',
    imageField: 'image',
    columns: [
        { key: 'destination_name',  label: 'Country',   badge: 'teal' },
        { key: 'hospital_name',     label: 'Hospital'                  },
        { key: 'specialty_name_fk', label: 'Specialty'                 },
        { key: 'experience_years',  label: 'Exp (yrs)'                 },
    ],
    filters: [
        {
            id: 'destFilter',
            apiSource: '/api/destinations',
            placeholder: 'All Countries',
            filterFn: (item, val) => !val || String(item.destination_id) === val
        },
        {
            id: 'specFilter',
            apiSource: '/api/specialties',
            placeholder: 'All Specialties',
            filterFn: (item, val) => !val || String(item.specialty_id) === val
        }
    ],
    quickEditFields: [
        { id: 'name',             label: 'Name',       type: 'text'   },
        { id: 'slug',             label: 'Slug',       type: 'text'   },
        { id: 'title',            label: 'Title',      type: 'text'   },
        { id: 'city',             label: 'City',       type: 'text'   },
        { id: 'experience_years', label: 'Experience', type: 'number' },
        { id: 'status',           label: 'Status',     type: 'status' },
    ],
    defaultSort: 'name',
    defaultDir: 'asc',
};
</script>
</body>
</html>
